{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":49,"index":76}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":77},"end":{"line":3,"column":69,"index":146}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"loadDevConfig\", {\n    enumerable: true,\n    get: function () {\n      return loadDevConfig;\n    }\n  });\n  Object.defineProperty(exports, \"API_URL\", {\n    enumerable: true,\n    get: function () {\n      return API_URL;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  // DEV ONLY\n\n  // CRITICAL: This is the SHARED backend API used by both web and mobile apps\n  // This URL points to the web workspace's backend (Job: 961c0d08...)\n  // DO NOT CHANGE THIS URL unless instructed by the web developer\n  const DEFAULT_API_URL = 'https://apicache-fix.preview.emergentagent.com';\n  let API_URL = DEFAULT_API_URL;\n\n  // DEV ONLY: Load dev configuration\n  const loadDevConfig = async () => {\n    try {\n      const devUrl = await AsyncStorage.default.getItem('DEV_API_URL');\n      if (devUrl) {\n        API_URL = devUrl;\n        console.log('ðŸ”§ DEV: Using configured API URL:', API_URL);\n      } else {\n        console.log('ðŸ”§ DEV: Using default API URL:', API_URL);\n      }\n    } catch (error) {\n      console.log('Using default API URL');\n    }\n  };\n\n  // Call this on app startup\n  loadDevConfig();\n\n  // Log to verify correct URL is being used\n  console.log('ðŸ”— [POST-FORK-FIX-v3] Mobile App Backend URL:', DEFAULT_API_URL);\n  console.log('âœ… Connected to shared backend (web workspace)');\n\n  // Storage helpers that work on both web and native\n  const getStorageItem = async key => {\n    if (Platform.default.OS === 'web') {\n      return localStorage.getItem(key);\n    } else {\n      return await SecureStore.getItemAsync(key);\n    }\n  };\n  const deleteStorageItem = async key => {\n    if (Platform.default.OS === 'web') {\n      localStorage.removeItem(key);\n    } else {\n      await SecureStore.deleteItemAsync(key);\n    }\n  };\n\n  // Get current API URL dynamically\n  const getCurrentApiUrl = async () => {\n    try {\n      const devUrl = await AsyncStorage.default.getItem('DEV_API_URL');\n      return devUrl || DEFAULT_API_URL;\n    } catch (error) {\n      return DEFAULT_API_URL;\n    }\n  };\n  const api = axios.default.create({\n    timeout: 30000,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Request interceptor to add auth token AND dynamic baseURL\n  api.interceptors.request.use(async config => {\n    // CRITICAL: Set baseURL dynamically from AsyncStorage\n    const currentApiUrl = await getCurrentApiUrl();\n    config.baseURL = `${currentApiUrl}/api`;\n    console.log('ðŸ”— Request to:', config.baseURL + config.url);\n\n    // DEV ONLY: Try dev token first\n    try {\n      const devToken = await AsyncStorage.default.getItem('DEV_TOKEN');\n      if (devToken) {\n        config.headers.Authorization = `Bearer ${devToken}`;\n        console.log('ðŸ”§ DEV: Using configured auth token');\n        return config;\n      }\n    } catch (error) {\n      console.log('No dev token');\n    }\n\n    // Fall back to normal auth token\n    const token = await getStorageItem('auth_token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  // Response interceptor for error handling\n  api.interceptors.response.use(response => response, error => {\n    if (error.response?.status === 401) {\n      // Token expired or invalid\n      deleteStorageItem('auth_token');\n      deleteStorageItem('user_data');\n    }\n    return Promise.reject(error);\n  });\n  var _default = api;\n});","lineCount":154,"map":[[27,2,114,0,"Object"],[27,8,114,0],[27,9,114,0,"defineProperty"],[27,23,114,0],[27,24,114,0,"exports"],[27,31,114,0],[28,4,114,0,"enumerable"],[28,14,114,0],[29,4,114,0,"get"],[29,7,114,0],[29,18,114,0,"get"],[29,19,114,0],[30,6,114,0],[30,13,114,0,"_default"],[30,21,114,0],[31,4,114,0],[32,2,114,0],[33,2,13,0,"Object"],[33,8,13,0],[33,9,13,0,"defineProperty"],[33,23,13,0],[33,24,13,0,"exports"],[33,31,13,0],[34,4,13,0,"enumerable"],[34,14,13,0],[35,4,13,0,"get"],[35,7,13,0],[35,18,13,0,"get"],[35,19,13,0],[36,6,13,0],[36,13,13,0,"loadDevConfig"],[36,26,13,0],[37,4,13,0],[38,2,13,0],[39,2,113,0,"Object"],[39,8,113,0],[39,9,113,0,"defineProperty"],[39,23,113,0],[39,24,113,0,"exports"],[39,31,113,0],[40,4,113,0,"enumerable"],[40,14,113,0],[41,4,113,0,"get"],[41,7,113,0],[41,18,113,0,"get"],[41,19,113,0],[42,6,113,0],[42,13,113,9,"API_URL"],[42,20,113,16],[43,4,113,16],[44,2,113,16],[45,2,1,0],[45,6,1,0,"_axios"],[45,12,1,0],[45,15,1,0,"require"],[45,22,1,0],[45,23,1,0,"_dependencyMap"],[45,37,1,0],[46,2,1,0],[46,6,1,0,"axios"],[46,11,1,0],[46,14,1,0,"_interopDefault"],[46,29,1,0],[46,30,1,0,"_axios"],[46,36,1,0],[47,2,2,0],[47,6,2,0,"_expoSecureStore"],[47,22,2,0],[47,25,2,0,"require"],[47,32,2,0],[47,33,2,0,"_dependencyMap"],[47,47,2,0],[48,2,2,0],[48,6,2,0,"SecureStore"],[48,17,2,0],[48,20,2,0,"_interopNamespace"],[48,37,2,0],[48,38,2,0,"_expoSecureStore"],[48,54,2,0],[49,2,3,0],[49,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[49,42,3,0],[49,45,3,0,"require"],[49,52,3,0],[49,53,3,0,"_dependencyMap"],[49,67,3,0],[50,2,3,0],[50,6,3,0,"AsyncStorage"],[50,18,3,0],[50,21,3,0,"_interopDefault"],[50,36,3,0],[50,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[50,73,3,0],[51,2,3,69],[51,6,3,69,"_reactNativeWebDistExportsPlatform"],[51,40,3,69],[51,43,3,69,"require"],[51,50,3,69],[51,51,3,69,"_dependencyMap"],[51,65,3,69],[52,2,3,69],[52,6,3,69,"Platform"],[52,14,3,69],[52,17,3,69,"_interopDefault"],[52,32,3,69],[52,33,3,69,"_reactNativeWebDistExportsPlatform"],[52,67,3,69],[53,2,3,70],[55,2,6,0],[56,2,7,0],[57,2,8,0],[58,2,9,0],[58,8,9,6,"DEFAULT_API_URL"],[58,23,9,21],[58,26,9,24],[58,74,9,72],[59,2,10,0],[59,6,10,4,"API_URL"],[59,13,10,11],[59,16,10,14,"DEFAULT_API_URL"],[59,31,10,29],[61,2,12,0],[62,2,13,7],[62,8,13,13,"loadDevConfig"],[62,21,13,26],[62,24,13,29],[62,30,13,29,"loadDevConfig"],[62,31,13,29],[62,36,13,41],[63,4,14,2],[63,8,14,6],[64,6,15,4],[64,12,15,10,"devUrl"],[64,18,15,16],[64,21,15,19],[64,27,15,25,"AsyncStorage"],[64,39,15,37],[64,40,15,37,"default"],[64,47,15,37],[64,48,15,38,"getItem"],[64,55,15,45],[64,56,15,46],[64,69,15,59],[64,70,15,60],[65,6,16,4],[65,10,16,8,"devUrl"],[65,16,16,14],[65,18,16,16],[66,8,17,6,"API_URL"],[66,15,17,13],[66,18,17,16,"devUrl"],[66,24,17,22],[67,8,18,6,"console"],[67,15,18,13],[67,16,18,14,"log"],[67,19,18,17],[67,20,18,18],[67,55,18,53],[67,57,18,55,"API_URL"],[67,64,18,62],[67,65,18,63],[68,6,19,4],[68,7,19,5],[68,13,19,11],[69,8,20,6,"console"],[69,15,20,13],[69,16,20,14,"log"],[69,19,20,17],[69,20,20,18],[69,52,20,50],[69,54,20,52,"API_URL"],[69,61,20,59],[69,62,20,60],[70,6,21,4],[71,4,22,2],[71,5,22,3],[71,6,22,4],[71,13,22,11,"error"],[71,18,22,16],[71,20,22,18],[72,6,23,4,"console"],[72,13,23,11],[72,14,23,12,"log"],[72,17,23,15],[72,18,23,16],[72,41,23,39],[72,42,23,40],[73,4,24,2],[74,2,25,0],[74,3,25,1],[76,2,27,0],[77,2,28,0,"loadDevConfig"],[77,15,28,13],[77,16,28,14],[77,17,28,15],[79,2,30,0],[80,2,31,0,"console"],[80,9,31,7],[80,10,31,8,"log"],[80,13,31,11],[80,14,31,12],[80,61,31,59],[80,63,31,61,"DEFAULT_API_URL"],[80,78,31,76],[80,79,31,77],[81,2,32,0,"console"],[81,9,32,7],[81,10,32,8,"log"],[81,13,32,11],[81,14,32,12],[81,61,32,59],[81,62,32,60],[83,2,34,0],[84,2,35,0],[84,8,35,6,"getStorageItem"],[84,22,35,20],[84,25,35,23],[84,31,35,30,"key"],[84,34,35,41],[84,38,35,46],[85,4,36,2],[85,8,36,6,"Platform"],[85,16,36,14],[85,17,36,14,"default"],[85,24,36,14],[85,25,36,15,"OS"],[85,27,36,17],[85,32,36,22],[85,37,36,27],[85,39,36,29],[86,6,37,4],[86,13,37,11,"localStorage"],[86,25,37,23],[86,26,37,24,"getItem"],[86,33,37,31],[86,34,37,32,"key"],[86,37,37,35],[86,38,37,36],[87,4,38,2],[87,5,38,3],[87,11,38,9],[88,6,39,4],[88,13,39,11],[88,19,39,17,"SecureStore"],[88,30,39,28],[88,31,39,29,"getItemAsync"],[88,43,39,41],[88,44,39,42,"key"],[88,47,39,45],[88,48,39,46],[89,4,40,2],[90,2,41,0],[90,3,41,1],[91,2,43,0],[91,8,43,6,"deleteStorageItem"],[91,25,43,23],[91,28,43,26],[91,34,43,33,"key"],[91,37,43,44],[91,41,43,49],[92,4,44,2],[92,8,44,6,"Platform"],[92,16,44,14],[92,17,44,14,"default"],[92,24,44,14],[92,25,44,15,"OS"],[92,27,44,17],[92,32,44,22],[92,37,44,27],[92,39,44,29],[93,6,45,4,"localStorage"],[93,18,45,16],[93,19,45,17,"removeItem"],[93,29,45,27],[93,30,45,28,"key"],[93,33,45,31],[93,34,45,32],[94,4,46,2],[94,5,46,3],[94,11,46,9],[95,6,47,4],[95,12,47,10,"SecureStore"],[95,23,47,21],[95,24,47,22,"deleteItemAsync"],[95,39,47,37],[95,40,47,38,"key"],[95,43,47,41],[95,44,47,42],[96,4,48,2],[97,2,49,0],[97,3,49,1],[99,2,51,0],[100,2,52,0],[100,8,52,6,"getCurrentApiUrl"],[100,24,52,22],[100,27,52,25],[100,33,52,25,"getCurrentApiUrl"],[100,34,52,25],[100,39,52,37],[101,4,53,2],[101,8,53,6],[102,6,54,4],[102,12,54,10,"devUrl"],[102,18,54,16],[102,21,54,19],[102,27,54,25,"AsyncStorage"],[102,39,54,37],[102,40,54,37,"default"],[102,47,54,37],[102,48,54,38,"getItem"],[102,55,54,45],[102,56,54,46],[102,69,54,59],[102,70,54,60],[103,6,55,4],[103,13,55,11,"devUrl"],[103,19,55,17],[103,23,55,21,"DEFAULT_API_URL"],[103,38,55,36],[104,4,56,2],[104,5,56,3],[104,6,56,4],[104,13,56,11,"error"],[104,18,56,16],[104,20,56,18],[105,6,57,4],[105,13,57,11,"DEFAULT_API_URL"],[105,28,57,26],[106,4,58,2],[107,2,59,0],[107,3,59,1],[108,2,61,0],[108,8,61,6,"api"],[108,11,61,9],[108,14,61,12,"axios"],[108,19,61,17],[108,20,61,17,"default"],[108,27,61,17],[108,28,61,18,"create"],[108,34,61,24],[108,35,61,25],[109,4,62,2,"timeout"],[109,11,62,9],[109,13,62,11],[109,18,62,16],[110,4,63,2,"headers"],[110,11,63,9],[110,13,63,11],[111,6,64,4],[111,20,64,18],[111,22,64,20],[112,4,65,2],[113,2,66,0],[113,3,66,1],[113,4,66,2],[115,2,68,0],[116,2,69,0,"api"],[116,5,69,3],[116,6,69,4,"interceptors"],[116,18,69,16],[116,19,69,17,"request"],[116,26,69,24],[116,27,69,25,"use"],[116,30,69,28],[116,31,70,2],[116,37,70,9,"config"],[116,43,70,15],[116,47,70,20],[117,4,71,4],[118,4,72,4],[118,10,72,10,"currentApiUrl"],[118,23,72,23],[118,26,72,26],[118,32,72,32,"getCurrentApiUrl"],[118,48,72,48],[118,49,72,49],[118,50,72,50],[119,4,73,4,"config"],[119,10,73,10],[119,11,73,11,"baseURL"],[119,18,73,18],[119,21,73,21],[119,24,73,24,"currentApiUrl"],[119,37,73,37],[119,43,73,43],[120,4,74,4,"console"],[120,11,74,11],[120,12,74,12,"log"],[120,15,74,15],[120,16,74,16],[120,32,74,32],[120,34,74,34,"config"],[120,40,74,40],[120,41,74,41,"baseURL"],[120,48,74,48],[120,51,74,51,"config"],[120,57,74,57],[120,58,74,58,"url"],[120,61,74,61],[120,62,74,62],[122,4,76,4],[123,4,77,4],[123,8,77,8],[124,6,78,6],[124,12,78,12,"devToken"],[124,20,78,20],[124,23,78,23],[124,29,78,29,"AsyncStorage"],[124,41,78,41],[124,42,78,41,"default"],[124,49,78,41],[124,50,78,42,"getItem"],[124,57,78,49],[124,58,78,50],[124,69,78,61],[124,70,78,62],[125,6,79,6],[125,10,79,10,"devToken"],[125,18,79,18],[125,20,79,20],[126,8,80,8,"config"],[126,14,80,14],[126,15,80,15,"headers"],[126,22,80,22],[126,23,80,23,"Authorization"],[126,36,80,36],[126,39,80,39],[126,49,80,49,"devToken"],[126,57,80,57],[126,59,80,59],[127,8,81,8,"console"],[127,15,81,15],[127,16,81,16,"log"],[127,19,81,19],[127,20,81,20],[127,57,81,57],[127,58,81,58],[128,8,82,8],[128,15,82,15,"config"],[128,21,82,21],[129,6,83,6],[130,4,84,4],[130,5,84,5],[130,6,84,6],[130,13,84,13,"error"],[130,18,84,18],[130,20,84,20],[131,6,85,6,"console"],[131,13,85,13],[131,14,85,14,"log"],[131,17,85,17],[131,18,85,18],[131,32,85,32],[131,33,85,33],[132,4,86,4],[134,4,88,4],[135,4,89,4],[135,10,89,10,"token"],[135,15,89,15],[135,18,89,18],[135,24,89,24,"getStorageItem"],[135,38,89,38],[135,39,89,39],[135,51,89,51],[135,52,89,52],[136,4,90,4],[136,8,90,8,"token"],[136,13,90,13],[136,15,90,15],[137,6,91,6,"config"],[137,12,91,12],[137,13,91,13,"headers"],[137,20,91,20],[137,21,91,21,"Authorization"],[137,34,91,34],[137,37,91,37],[137,47,91,47,"token"],[137,52,91,52],[137,54,91,54],[138,4,92,4],[139,4,93,4],[139,11,93,11,"config"],[139,17,93,17],[140,2,94,2],[140,3,94,3],[140,5,95,3,"error"],[140,10,95,8],[140,14,95,13],[141,4,96,4],[141,11,96,11,"Promise"],[141,18,96,18],[141,19,96,19,"reject"],[141,25,96,25],[141,26,96,26,"error"],[141,31,96,31],[141,32,96,32],[142,2,97,2],[142,3,98,0],[142,4,98,1],[144,2,100,0],[145,2,101,0,"api"],[145,5,101,3],[145,6,101,4,"interceptors"],[145,18,101,16],[145,19,101,17,"response"],[145,27,101,25],[145,28,101,26,"use"],[145,31,101,29],[145,32,102,3,"response"],[145,40,102,11],[145,44,102,16,"response"],[145,52,102,24],[145,54,103,3,"error"],[145,59,103,8],[145,63,103,13],[146,4,104,4],[146,8,104,8,"error"],[146,13,104,13],[146,14,104,14,"response"],[146,22,104,22],[146,24,104,24,"status"],[146,30,104,30],[146,35,104,35],[146,38,104,38],[146,40,104,40],[147,6,105,6],[148,6,106,6,"deleteStorageItem"],[148,23,106,23],[148,24,106,24],[148,36,106,36],[148,37,106,37],[149,6,107,6,"deleteStorageItem"],[149,23,107,23],[149,24,107,24],[149,35,107,35],[149,36,107,36],[150,4,108,4],[151,4,109,4],[151,11,109,11,"Promise"],[151,18,109,18],[151,19,109,19,"reject"],[151,25,109,25],[151,26,109,26,"error"],[151,31,109,31],[151,32,109,32],[152,2,110,2],[152,3,111,0],[152,4,111,1],[153,2,114,0],[153,6,114,0,"_default"],[153,14,114,0],[153,17,114,15,"api"],[153,20,114,18],[154,0,114,19],[154,3]],"functionMap":{"names":["<global>","loadDevConfig","getStorageItem","deleteStorageItem","getCurrentApiUrl","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1"],"mappings":"AAA;6BCY;CDY;uBEU;CFM;0BGE;CHM;yBIG;CJO;EKW;GLwB;EMC;GNE;EOK,sBP;EQC;GRO"},"hasCjsExports":false},"type":"js/module"}]}