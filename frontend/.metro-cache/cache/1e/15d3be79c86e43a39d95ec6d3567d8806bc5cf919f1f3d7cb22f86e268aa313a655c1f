{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":49,"index":128}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":129},"end":{"line":3,"column":26,"index":155}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../backend-config.json","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":197},"end":{"line":5,"column":51,"index":248}}],"key":"Yg9oI/i39ksdVhZMppaxMFSSHg8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"useAuth\",{enumerable:!0,get:function(){return h}}),Object.defineProperty(_e,\"AuthProvider\",{enumerable:!0,get:function(){return p}});var t=r(_d[0]),o=((function(e){if(e&&e.__esModule)return e;var t={};e&&Object.keys(e).forEach(function(o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}),t.default=e})(r(_d[1])),e(r(_d[2])));r(_d[3]);var n=e(r(_d[4])),s=r(_d[5]);const c=n.default.backendUrl||process.env.EXPO_PUBLIC_BACKEND_URL;console.log('\\ud83d\\udd27 AuthContext API_URL:',c),console.log('\\ud83d\\udd27 Using backend-config.json:',n.default.backendUrl);const l=async(e,t)=>{localStorage.setItem(e,t)},u=async e=>localStorage.getItem(e),d=async e=>{localStorage.removeItem(e)},f=(0,t.createContext)({}),h=()=>(0,t.useContext)(f),p=({children:e})=>{const[n,h]=(0,t.useState)(null),[p,w]=(0,t.useState)(null),[_,y]=(0,t.useState)(!0);(0,t.useEffect)(()=>{k()},[]);const k=async()=>{try{const e=await u('auth_token'),t=await u('user_data');if(e&&t){w(e),h(JSON.parse(t));try{const t=await o.default.get(`${c}/api/auth/me`,{headers:{Authorization:`Bearer ${e}`}});h(t.data)}catch(e){await d('auth_token'),await d('user_data'),w(null),h(null)}}}catch(e){console.error('Error loading auth:',e)}finally{y(!1)}};return(0,s.jsx)(f.Provider,{value:{user:n,token:p,login:async(e,t)=>{try{const n=await o.default.post(`${c}/api/auth/login`,{email:e,password:t}),{access_token:s,user:u}=n.data;await l('auth_token',s),await l('user_data',JSON.stringify(u)),w(s),h(u)}catch(e){throw new Error(e.response?.data?.detail||'Login failed')}},pinLogin:async(e,t)=>{try{const n=`${c}/api/auth/pin-login`;console.log('=== PIN Login Debug ==='),console.log('URL:',n),console.log('Email:',e),console.log('PIN:',t);const s=await o.default.post(n,{email:e.toLowerCase().trim(),pin:t});console.log('Success! Response:',s.data);const{access_token:u,user:d}=s.data;if(!u)throw new Error('No access token received from server');await l('auth_token',u),await l('user_data',JSON.stringify(d)),w(u),h(d)}catch(e){console.error('=== PIN Login Error ==='),console.error('Full error:',e),console.error('Error response:',e.response),console.error('Error data:',e.response?.data),console.error('Error message:',e.message);let t='Login failed. Please check your credentials.';if(e.response?.data){const o=e.response.data;'string'==typeof o?t=o:o.detail?t=o.detail:o.message?t=o.message:o.error&&(t=o.error)}else e.message&&'Network Error'!==e.message&&(t=e.message);throw console.error('Final error message:',t),new Error(t)}},register:async(e,t,n,s)=>{try{const u=await o.default.post(`${c}/api/auth/register`,{email:e,password:t,full_name:n,phone:s}),{access_token:d,user:f}=u.data;await l('auth_token',d),await l('user_data',JSON.stringify(f)),w(d),h(f)}catch(e){throw new Error(e.response?.data?.detail||'Registration failed')}},logout:async()=>{await d('auth_token'),await d('user_data'),w(null),h(null)},isLoading:_},children:e})}});","lineCount":1,"map":[[1,144,61,0,"Object"],[1,151,61,0,"defineProperty"],[1,166,61,0,"_e"],[1,169,61,0],[1,180,61,0,"enumerable"],[1,192,61,0],[1,194,61,0,"get"],[1,198,61,0],[1,216,61,0,"useAuth"],[1,217,61,0],[1,221,63,0,"Object"],[1,228,63,0,"defineProperty"],[1,243,63,0,"_e"],[1,246,63,0],[1,262,63,0,"enumerable"],[1,274,63,0],[1,276,63,0,"get"],[1,280,63,0],[1,298,63,0,"AuthProvider"],[1,299,63,0],[1,303,1,0],[1,307,1,0,"_react"],[1,309,1,0,"r"],[1,311,1,0,"_d"],[1,314,1,0],[1,318,3,0,"axios"],[1,322],[1,546,2,0,"_interopNamespace"],[1,547,2,0,"r"],[1,549,2,0,"_d"],[1,552,2,0],[1,557,3,0,"_interopDefault"],[1,559,3,0,"r"],[1,561,3,0,"_d"],[1,564,3,0],[1,570,3,26,"r"],[1,572,3,26,"_d"],[1,575,3,26],[1,579,5,0],[1,583,5,0,"backendConfig"],[1,585,5,0,"_interopDefault"],[1,587,5,0,"r"],[1,589,5,0,"_d"],[1,592,5,0],[1,597,5,51,"_reactJsxRuntime"],[1,599,5,51,"r"],[1,601,5,51,"_d"],[1,604,5,51],[1,608,8,0],[1,614,8,6,"API_URL"],[1,616,8,16,"backendConfig"],[1,618,8,29,"default"],[1,626,8,30,"backendUrl"],[1,638,8,44,"process"],[1,646,8,52,"env"],[1,650,8,56,"EXPO_PUBLIC_BACKEND_URL"],[1,674,9,0,"console"],[1,682,9,8,"log"],[1,686,9,12],[1,722,9,39,"API_URL"],[1,725,10,0,"console"],[1,733,10,8,"log"],[1,737,10,12],[1,779,10,45,"backendConfig"],[1,781,10,58,"default"],[1,789,10,59,"backendUrl"],[1,801,13,0],[1,807,13,6,"setStorageItem"],[1,809,13,23,"async"],[1,815,13,30,"key"],[1,817,13,43,"value"],[1,822,15,4,"localStorage"],[1,835,15,17,"setItem"],[1,843,15,25,"key"],[1,845,15,30,"value"],[1,849,21,6,"getStorageItem"],[1,851,21,23,"async"],[1,860,23,11,"localStorage"],[1,873,23,24,"getItem"],[1,881,23,32,"key"],[1,884,29,6,"deleteStorageItem"],[1,886,29,26,"async"],[1,896,31,4,"localStorage"],[1,909,31,17,"removeItem"],[1,920,31,28,"key"],[1,924,59,6,"AuthContext"],[1,927,59,20],[1,929,59,20,"createContext"],[1,931,59,33,"createContext"],[1,946,59,51],[1,947,59,52],[1,950,61,13,"useAuth"],[1,952,61,23,"useAuth"],[1,957,61,29],[1,959,61,29,"useContext"],[1,961,61,39,"useContext"],[1,973,61,40,"AuthContext"],[1,976,63,13,"AuthProvider"],[1,978,63,28,"AuthProvider"],[1,980,63,31,"children"],[1,995,64,2],[1,1001,64,9,"user"],[1,1003,64,15,"setUser"],[1,1007,64,26],[1,1009,64,26,"useState"],[1,1011,64,34,"useState"],[1,1021,64,48],[1,1028,65,9,"token"],[1,1030,65,16,"setToken"],[1,1034,65,28],[1,1036,65,28,"useState"],[1,1038,65,36,"useState"],[1,1048,65,52],[1,1055,66,9,"isLoading"],[1,1057,66,20,"setIsLoading"],[1,1061,66,36],[1,1063,66,36,"useState"],[1,1065,66,44,"useState"],[1,1076,66,45],[1,1080,68,2],[1,1082,68,2,"useEffect"],[1,1084,68,11,"useEffect"],[1,1095,68,12],[1,1100,69,4,"loadStoredAuth"],[1,1105,70,5],[1,1109,72,2],[1,1115,72,8,"loadStoredAuth"],[1,1117,72,25,"async"],[1,1127,73,4],[1,1131,74,6],[1,1137,74,12,"storedToken"],[1,1145,74,32,"getStorageItem"],[1,1147,74,47],[1,1161,75,12,"storedUser"],[1,1169,75,31,"getStorageItem"],[1,1171,75,46],[1,1184,77,6],[1,1187,77,10,"storedToken"],[1,1190,77,25,"storedUser"],[1,1192,77,37],[1,1193,78,8,"setToken"],[1,1195,78,17,"storedToken"],[1,1198,79,8,"setUser"],[1,1200,79,16,"JSON"],[1,1205,79,21,"parse"],[1,1211,79,27,"storedUser"],[1,1215,82,8],[1,1219,83,10],[1,1225,83,16,"response"],[1,1233,83,33,"axios"],[1,1235,83,38,"default"],[1,1243,83,39,"get"],[1,1247,83,43],[1,1250,83,46,"API_URL"],[1,1266,83,69],[1,1267,84,12,"headers"],[1,1275,84,21],[1,1276,84,23,"Authorization"],[1,1290,84,38],[1,1300,84,48,"storedToken"],[1,1307,86,10,"setUser"],[1,1309,86,18,"response"],[1,1311,86,27,"data"],[1,1316,87,8],[1,1317,87,10],[1,1323,87,17,"error"],[1,1332,89,16,"deleteStorageItem"],[1,1334,89,34],[1,1354,90,16,"deleteStorageItem"],[1,1356,90,34],[1,1369,91,10,"setToken"],[1,1371,91,19],[1,1377,92,10,"setUser"],[1,1379,92,18],[1,1384,93,8],[1,1385,94,6],[1,1386,95,4],[1,1387,95,6],[1,1393,95,13,"error"],[1,1396,96,6,"console"],[1,1404,96,14,"error"],[1,1410,96,20],[1,1432,96,43,"error"],[1,1434,97,4],[1,1435,97,5],[1,1443,98,6,"setIsLoading"],[1,1446,98,19],[1,1448,99,4],[1,1451,205,2],[1,1458,206,4],[1,1460,206,4,"_reactJsxRuntime"],[1,1462,206,4,"jsx"],[1,1467,206,5,"AuthContext"],[1,1469,206,17,"Provider"],[1,1478,206,25],[1,1479,206,26,"value"],[1,1485,206,33],[1,1486,206,35,"user"],[1,1493,206,41,"token"],[1,1501,206,48,"login"],[1,1507,102,16,"async"],[1,1513,102,23,"email"],[1,1515,102,38,"password"],[1,1520,103,4],[1,1524,104,6],[1,1530,104,12,"response"],[1,1538,104,29,"axios"],[1,1540,104,34,"default"],[1,1548,104,35,"post"],[1,1553,104,40],[1,1556,104,43,"API_URL"],[1,1575,104,69],[1,1576,105,8,"email"],[1,1584,106,8,"password"],[1,1598,109,12,"access_token"],[1,1611,109,14,"access_token"],[1,1613,109,28,"user"],[1,1618,109,34,"userData"],[1,1621,109,47,"response"],[1,1623,109,56,"data"],[1,1634,111,12,"setStorageItem"],[1,1636,111,27],[1,1649,111,41,"access_token"],[1,1658,112,12,"setStorageItem"],[1,1660,112,27],[1,1672,112,40,"JSON"],[1,1677,112,45,"stringify"],[1,1687,112,55,"userData"],[1,1691,114,6,"setToken"],[1,1693,114,15,"access_token"],[1,1696,115,6,"setUser"],[1,1698,115,14,"userData"],[1,1700,116,4],[1,1701,116,6],[1,1707,116,13,"error"],[1,1710,117,6],[1,1716,117,12],[1,1720,117,16,"Error"],[1,1726,117,22,"error"],[1,1728,117,28,"response"],[1,1738,117,38,"data"],[1,1744,117,44,"detail"],[1,1752,117,54],[1,1767,118,4],[1,1770,206,55,"pinLogin"],[1,1779,121,19,"async"],[1,1785,121,26,"email"],[1,1787,121,41,"pin"],[1,1792,122,4],[1,1796,123,6],[1,1802,123,12,"url"],[1,1804,123,18],[1,1807,123,21,"API_URL"],[1,1830,124,6,"console"],[1,1838,124,14,"log"],[1,1842,124,18],[1,1869,125,6,"console"],[1,1877,125,14,"log"],[1,1881,125,18],[1,1888,125,26,"url"],[1,1891,126,6,"console"],[1,1899,126,14,"log"],[1,1903,126,18],[1,1912,126,28,"email"],[1,1915,127,6,"console"],[1,1923,127,14,"log"],[1,1927,127,18],[1,1934,127,26,"pin"],[1,1937,129,6],[1,1943,129,12,"response"],[1,1951,129,29,"axios"],[1,1953,129,34,"default"],[1,1961,129,35,"post"],[1,1966,129,40,"url"],[1,1968,129,45],[1,1969,130,8,"email"],[1,1975,130,15,"email"],[1,1977,130,21,"toLowerCase"],[1,1991,130,35,"trim"],[1,1998,131,8,"pin"],[1,2006,134,6,"console"],[1,2014,134,14,"log"],[1,2018,134,18],[1,2039,134,40,"response"],[1,2041,134,49,"data"],[1,2047,136,6],[1,2053,136,12,"access_token"],[1,2066,136,14,"access_token"],[1,2068,136,28,"user"],[1,2073,136,34,"userData"],[1,2076,136,47,"response"],[1,2078,136,56,"data"],[1,2083,138,6],[1,2087,138,11,"access_token"],[1,2089,139,8],[1,2095,139,14],[1,2099,139,18,"Error"],[1,2105,139,24],[1,2151,142,12,"setStorageItem"],[1,2153,142,27],[1,2166,142,41,"access_token"],[1,2175,143,12,"setStorageItem"],[1,2177,143,27],[1,2189,143,40,"JSON"],[1,2194,143,45,"stringify"],[1,2204,143,55,"userData"],[1,2208,145,6,"setToken"],[1,2210,145,15,"access_token"],[1,2213,146,6,"setUser"],[1,2215,146,14,"userData"],[1,2217,147,4],[1,2218,147,6],[1,2224,147,13,"error"],[1,2227,148,6,"console"],[1,2235,148,14,"error"],[1,2241,148,20],[1,2268,149,6,"console"],[1,2276,149,14,"error"],[1,2282,149,20],[1,2296,149,35,"error"],[1,2299,150,6,"console"],[1,2307,150,14,"error"],[1,2313,150,20],[1,2331,150,39,"error"],[1,2333,150,45,"response"],[1,2343,151,6,"console"],[1,2351,151,14,"error"],[1,2357,151,20],[1,2371,151,35,"error"],[1,2373,151,41,"response"],[1,2383,151,51,"data"],[1,2389,152,6,"console"],[1,2397,152,14,"error"],[1,2403,152,20],[1,2420,152,38,"error"],[1,2422,152,44,"message"],[1,2431,155,6],[1,2435,155,10,"errorMessage"],[1,2437,155,25],[1,2484,157,6],[1,2487,157,10,"error"],[1,2489,157,16,"response"],[1,2499,157,26,"data"],[1,2504,157,32],[1,2505,158,8],[1,2511,158,14,"data"],[1,2513,158,21,"error"],[1,2515,158,27,"response"],[1,2524,158,36,"data"],[1,2529,159,28],[1,2546,159,19,"data"],[1,2548,160,10,"errorMessage"],[1,2550,160,25,"data"],[1,2552,161,19,"data"],[1,2554,161,24,"detail"],[1,2561,162,10,"errorMessage"],[1,2563,162,25,"data"],[1,2565,162,30,"detail"],[1,2572,163,19,"data"],[1,2574,163,24,"message"],[1,2582,164,10,"errorMessage"],[1,2584,164,25,"data"],[1,2586,164,30,"message"],[1,2594,165,19,"data"],[1,2596,165,24,"error"],[1,2604,166,10,"errorMessage"],[1,2606,166,25,"data"],[1,2608,166,30,"error"],[1,2614,168,6],[1,2620,168,17,"error"],[1,2622,168,23,"message"],[1,2631,168,52],[1,2649,168,34,"error"],[1,2651,168,40,"message"],[1,2661,169,8,"errorMessage"],[1,2663,169,23,"error"],[1,2665,169,29,"message"],[1,2674,173,6],[1,2680,172,6,"console"],[1,2688,172,14,"error"],[1,2694,172,20],[1,2717,172,44,"errorMessage"],[1,2720,173,12],[1,2724,173,16,"Error"],[1,2730,173,22,"errorMessage"],[1,2732,174,4],[1,2735,206,65,"register"],[1,2744,177,19,"async"],[1,2750,177,26,"email"],[1,2752,177,41,"password"],[1,2754,177,59,"fullName"],[1,2756,177,77,"phone"],[1,2761,178,4],[1,2765,179,6],[1,2771,179,12,"response"],[1,2779,179,29,"axios"],[1,2781,179,34,"default"],[1,2789,179,35,"post"],[1,2794,179,40],[1,2797,179,43,"API_URL"],[1,2819,179,72],[1,2820,180,8,"email"],[1,2828,181,8,"password"],[1,2839,182,8,"full_name"],[1,2849,182,19,"fullName"],[1,2851,183,8,"phone"],[1,2862,186,12,"access_token"],[1,2875,186,14,"access_token"],[1,2877,186,28,"user"],[1,2882,186,34,"userData"],[1,2885,186,47,"response"],[1,2887,186,56,"data"],[1,2898,188,12,"setStorageItem"],[1,2900,188,27],[1,2913,188,41,"access_token"],[1,2922,189,12,"setStorageItem"],[1,2924,189,27],[1,2936,189,40,"JSON"],[1,2941,189,45,"stringify"],[1,2951,189,55,"userData"],[1,2955,191,6,"setToken"],[1,2957,191,15,"access_token"],[1,2960,192,6,"setUser"],[1,2962,192,14,"userData"],[1,2964,193,4],[1,2965,193,6],[1,2971,193,13,"error"],[1,2974,194,6],[1,2980,194,12],[1,2984,194,16,"Error"],[1,2990,194,22,"error"],[1,2992,194,28,"response"],[1,3002,194,38,"data"],[1,3008,194,44,"detail"],[1,3016,194,54],[1,3038,195,4],[1,3041,206,75,"logout"],[1,3048,198,17,"async"],[1,3064,199,10,"deleteStorageItem"],[1,3066,199,28],[1,3086,200,10,"deleteStorageItem"],[1,3088,200,28],[1,3101,201,4,"setToken"],[1,3103,201,13],[1,3109,202,4,"setUser"],[1,3111,202,12],[1,3118,206,83,"isLoading"],[1,3131,206,95,"children"],[1,3140,207,7,"children"],[1,3144,210,2],[1,3147]],"functionMap":{"names":["<global>","setStorageItem","getStorageItem","deleteStorageItem","useAuth","AuthProvider","useEffect$argument_0","loadStoredAuth","login","pinLogin","register","logout"],"mappings":"AAA;uBCY;CDM;uBEE;CFM;0BGE;CHM;uBI0B,6BJ;4BKE;YCK;GDE;yBEE;GF4B;gBGE;GHiB;mBIE;GJsD;mBKE;GLmB;iBME;GNK;CLO"},"hasCjsExports":false},"type":"js/module"}]}