{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":49,"index":76}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":77},"end":{"line":3,"column":69,"index":146}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":159},"end":{"line":4,"column":40,"index":199}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"loadDevConfig\", {\n    enumerable: true,\n    get: function () {\n      return loadDevConfig;\n    }\n  });\n  Object.defineProperty(exports, \"API_URL\", {\n    enumerable: true,\n    get: function () {\n      return API_URL;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoSecureStore = require(_dependencyMap[2], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[3], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNative = require(_dependencyMap[4], \"react-native\");\n  // DEV ONLY\n\n  // CRITICAL: This is the SHARED backend API used by both web and mobile apps\n  // This URL points to the web workspace's backend (Job: 961c0d08...)\n  // DO NOT CHANGE THIS URL unless instructed by the web developer\n  var API_URL = 'https://tokenfix-2.preview.emergentagent.com';\n\n  // DEV ONLY: Load dev configuration\n  var loadDevConfig = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* () {\n      try {\n        var devUrl = yield AsyncStorage.default.getItem('DEV_API_URL');\n        if (devUrl) {\n          API_URL = devUrl;\n          console.log('ðŸ”§ DEV: Using configured API URL:', API_URL);\n        } else {\n          console.log('ðŸ”§ DEV: Using default API URL:', API_URL);\n        }\n      } catch (error) {\n        console.log('Using default API URL');\n      }\n    });\n    return function loadDevConfig() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  // Call this on app startup\n  loadDevConfig();\n\n  // Log to verify correct URL is being used\n  console.log('ðŸ”— [POST-FORK-FIX-v2] Mobile App Backend URL:', API_URL);\n  console.log('âœ… Connected to shared backend (web workspace)');\n\n  // Storage helpers that work on both web and native\n  var getStorageItem = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator.default)(function* (key) {\n      if (_reactNative.Platform.OS === 'web') {\n        return localStorage.getItem(key);\n      } else {\n        return yield SecureStore.getItemAsync(key);\n      }\n    });\n    return function getStorageItem(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var deleteStorageItem = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator.default)(function* (key) {\n      if (_reactNative.Platform.OS === 'web') {\n        localStorage.removeItem(key);\n      } else {\n        yield SecureStore.deleteItemAsync(key);\n      }\n    });\n    return function deleteStorageItem(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var api = axios.default.create({\n    baseURL: `${API_URL}/api`,\n    timeout: 30000,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Request interceptor to add auth token\n  api.interceptors.request.use(/*#__PURE__*/function () {\n    var _ref4 = (0, _asyncToGenerator.default)(function* (config) {\n      // DEV ONLY: Try dev token first\n      try {\n        var devToken = yield AsyncStorage.default.getItem('DEV_TOKEN');\n        if (devToken) {\n          config.headers.Authorization = `Bearer ${devToken}`;\n          console.log('ðŸ”§ DEV: Using configured auth token');\n          return config;\n        }\n      } catch (error) {\n        console.log('No dev token');\n      }\n\n      // Fall back to normal auth token\n      var token = yield getStorageItem('auth_token');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    });\n    return function (_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }(), error => {\n    return Promise.reject(error);\n  });\n\n  // Response interceptor for error handling\n  api.interceptors.response.use(response => response, error => {\n    if (error.response?.status === 401) {\n      // Token expired or invalid\n      deleteStorageItem('auth_token');\n      deleteStorageItem('user_data');\n    }\n    return Promise.reject(error);\n  });\n  var _default = api;\n});","lineCount":160,"map":[[27,2,99,0,"Object"],[27,8,99,0],[27,9,99,0,"defineProperty"],[27,23,99,0],[27,24,99,0,"exports"],[27,31,99,0],[28,4,99,0,"enumerable"],[28,14,99,0],[29,4,99,0,"get"],[29,7,99,0],[29,18,99,0,"get"],[29,19,99,0],[30,6,99,0],[30,13,99,0,"_default"],[30,21,99,0],[31,4,99,0],[32,2,99,0],[33,2,12,0,"Object"],[33,8,12,0],[33,9,12,0,"defineProperty"],[33,23,12,0],[33,24,12,0,"exports"],[33,31,12,0],[34,4,12,0,"enumerable"],[34,14,12,0],[35,4,12,0,"get"],[35,7,12,0],[35,18,12,0,"get"],[35,19,12,0],[36,6,12,0],[36,13,12,0,"loadDevConfig"],[36,26,12,0],[37,4,12,0],[38,2,12,0],[39,2,98,0,"Object"],[39,8,98,0],[39,9,98,0,"defineProperty"],[39,23,98,0],[39,24,98,0,"exports"],[39,31,98,0],[40,4,98,0,"enumerable"],[40,14,98,0],[41,4,98,0,"get"],[41,7,98,0],[41,18,98,0,"get"],[41,19,98,0],[42,6,98,0],[42,13,98,9,"API_URL"],[42,20,98,16],[43,4,98,16],[44,2,98,16],[45,2,98,19],[45,6,98,19,"_babelRuntimeHelpersAsyncToGenerator"],[45,42,98,19],[45,45,98,19,"require"],[45,52,98,19],[45,53,98,19,"_dependencyMap"],[45,67,98,19],[46,2,98,19],[46,6,98,19,"_asyncToGenerator"],[46,23,98,19],[46,26,98,19,"_interopDefault"],[46,41,98,19],[46,42,98,19,"_babelRuntimeHelpersAsyncToGenerator"],[46,78,98,19],[47,2,1,0],[47,6,1,0,"_axios"],[47,12,1,0],[47,15,1,0,"require"],[47,22,1,0],[47,23,1,0,"_dependencyMap"],[47,37,1,0],[48,2,1,0],[48,6,1,0,"axios"],[48,11,1,0],[48,14,1,0,"_interopDefault"],[48,29,1,0],[48,30,1,0,"_axios"],[48,36,1,0],[49,2,2,0],[49,6,2,0,"_expoSecureStore"],[49,22,2,0],[49,25,2,0,"require"],[49,32,2,0],[49,33,2,0,"_dependencyMap"],[49,47,2,0],[50,2,2,0],[50,6,2,0,"SecureStore"],[50,17,2,0],[50,20,2,0,"_interopNamespace"],[50,37,2,0],[50,38,2,0,"_expoSecureStore"],[50,54,2,0],[51,2,3,0],[51,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[51,42,3,0],[51,45,3,0,"require"],[51,52,3,0],[51,53,3,0,"_dependencyMap"],[51,67,3,0],[52,2,3,0],[52,6,3,0,"AsyncStorage"],[52,18,3,0],[52,21,3,0,"_interopDefault"],[52,36,3,0],[52,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[52,73,3,0],[53,2,4,0],[53,6,4,0,"_reactNative"],[53,18,4,0],[53,21,4,0,"require"],[53,28,4,0],[53,29,4,0,"_dependencyMap"],[53,43,4,0],[54,2,3,70],[56,2,6,0],[57,2,7,0],[58,2,8,0],[59,2,9,0],[59,6,9,4,"API_URL"],[59,13,9,11],[59,16,9,14],[59,66,9,64],[61,2,11,0],[62,2,12,7],[62,6,12,13,"loadDevConfig"],[62,19,12,26],[63,4,12,26],[63,8,12,26,"_ref"],[63,12,12,26],[63,19,12,26,"_asyncToGenerator"],[63,36,12,26],[63,37,12,26,"default"],[63,44,12,26],[63,46,12,29],[63,59,12,41],[64,6,13,2],[64,10,13,6],[65,8,14,4],[65,12,14,10,"devUrl"],[65,18,14,16],[65,27,14,25,"AsyncStorage"],[65,39,14,37],[65,40,14,37,"default"],[65,47,14,37],[65,48,14,38,"getItem"],[65,55,14,45],[65,56,14,46],[65,69,14,59],[65,70,14,60],[66,8,15,4],[66,12,15,8,"devUrl"],[66,18,15,14],[66,20,15,16],[67,10,16,6,"API_URL"],[67,17,16,13],[67,20,16,16,"devUrl"],[67,26,16,22],[68,10,17,6,"console"],[68,17,17,13],[68,18,17,14,"log"],[68,21,17,17],[68,22,17,18],[68,57,17,53],[68,59,17,55,"API_URL"],[68,66,17,62],[68,67,17,63],[69,8,18,4],[69,9,18,5],[69,15,18,11],[70,10,19,6,"console"],[70,17,19,13],[70,18,19,14,"log"],[70,21,19,17],[70,22,19,18],[70,54,19,50],[70,56,19,52,"API_URL"],[70,63,19,59],[70,64,19,60],[71,8,20,4],[72,6,21,2],[72,7,21,3],[72,8,21,4],[72,15,21,11,"error"],[72,20,21,16],[72,22,21,18],[73,8,22,4,"console"],[73,15,22,11],[73,16,22,12,"log"],[73,19,22,15],[73,20,22,16],[73,43,22,39],[73,44,22,40],[74,6,23,2],[75,4,24,0],[75,5,24,1],[76,4,24,1],[76,20,12,13,"loadDevConfig"],[76,33,12,26,"loadDevConfig"],[76,34,12,26],[77,6,12,26],[77,13,12,26,"_ref"],[77,17,12,26],[77,18,12,26,"apply"],[77,23,12,26],[77,30,12,26,"arguments"],[77,39,12,26],[78,4,12,26],[79,2,12,26],[79,5,24,1],[81,2,26,0],[82,2,27,0,"loadDevConfig"],[82,15,27,13],[82,16,27,14],[82,17,27,15],[84,2,29,0],[85,2,30,0,"console"],[85,9,30,7],[85,10,30,8,"log"],[85,13,30,11],[85,14,30,12],[85,61,30,59],[85,63,30,61,"API_URL"],[85,70,30,68],[85,71,30,69],[86,2,31,0,"console"],[86,9,31,7],[86,10,31,8,"log"],[86,13,31,11],[86,14,31,12],[86,61,31,59],[86,62,31,60],[88,2,33,0],[89,2,34,0],[89,6,34,6,"getStorageItem"],[89,20,34,20],[90,4,34,20],[90,8,34,20,"_ref2"],[90,13,34,20],[90,20,34,20,"_asyncToGenerator"],[90,37,34,20],[90,38,34,20,"default"],[90,45,34,20],[90,47,34,23],[90,58,34,30,"key"],[90,61,34,41],[90,63,34,46],[91,6,35,2],[91,10,35,6,"Platform"],[91,22,35,14],[91,23,35,14,"Platform"],[91,31,35,14],[91,32,35,15,"OS"],[91,34,35,17],[91,39,35,22],[91,44,35,27],[91,46,35,29],[92,8,36,4],[92,15,36,11,"localStorage"],[92,27,36,23],[92,28,36,24,"getItem"],[92,35,36,31],[92,36,36,32,"key"],[92,39,36,35],[92,40,36,36],[93,6,37,2],[93,7,37,3],[93,13,37,9],[94,8,38,4],[94,21,38,17,"SecureStore"],[94,32,38,28],[94,33,38,29,"getItemAsync"],[94,45,38,41],[94,46,38,42,"key"],[94,49,38,45],[94,50,38,46],[95,6,39,2],[96,4,40,0],[96,5,40,1],[97,4,40,1],[97,20,34,6,"getStorageItem"],[97,34,34,20,"getStorageItem"],[97,35,34,20,"_x"],[97,37,34,20],[98,6,34,20],[98,13,34,20,"_ref2"],[98,18,34,20],[98,19,34,20,"apply"],[98,24,34,20],[98,31,34,20,"arguments"],[98,40,34,20],[99,4,34,20],[100,2,34,20],[100,5,40,1],[101,2,42,0],[101,6,42,6,"deleteStorageItem"],[101,23,42,23],[102,4,42,23],[102,8,42,23,"_ref3"],[102,13,42,23],[102,20,42,23,"_asyncToGenerator"],[102,37,42,23],[102,38,42,23,"default"],[102,45,42,23],[102,47,42,26],[102,58,42,33,"key"],[102,61,42,44],[102,63,42,49],[103,6,43,2],[103,10,43,6,"Platform"],[103,22,43,14],[103,23,43,14,"Platform"],[103,31,43,14],[103,32,43,15,"OS"],[103,34,43,17],[103,39,43,22],[103,44,43,27],[103,46,43,29],[104,8,44,4,"localStorage"],[104,20,44,16],[104,21,44,17,"removeItem"],[104,31,44,27],[104,32,44,28,"key"],[104,35,44,31],[104,36,44,32],[105,6,45,2],[105,7,45,3],[105,13,45,9],[106,8,46,4],[106,14,46,10,"SecureStore"],[106,25,46,21],[106,26,46,22,"deleteItemAsync"],[106,41,46,37],[106,42,46,38,"key"],[106,45,46,41],[106,46,46,42],[107,6,47,2],[108,4,48,0],[108,5,48,1],[109,4,48,1],[109,20,42,6,"deleteStorageItem"],[109,37,42,23,"deleteStorageItem"],[109,38,42,23,"_x2"],[109,41,42,23],[110,6,42,23],[110,13,42,23,"_ref3"],[110,18,42,23],[110,19,42,23,"apply"],[110,24,42,23],[110,31,42,23,"arguments"],[110,40,42,23],[111,4,42,23],[112,2,42,23],[112,5,48,1],[113,2,50,0],[113,6,50,6,"api"],[113,9,50,9],[113,12,50,12,"axios"],[113,17,50,17],[113,18,50,17,"default"],[113,25,50,17],[113,26,50,18,"create"],[113,32,50,24],[113,33,50,25],[114,4,51,2,"baseURL"],[114,11,51,9],[114,13,51,11],[114,16,51,14,"API_URL"],[114,23,51,21],[114,29,51,27],[115,4,52,2,"timeout"],[115,11,52,9],[115,13,52,11],[115,18,52,16],[116,4,53,2,"headers"],[116,11,53,9],[116,13,53,11],[117,6,54,4],[117,20,54,18],[117,22,54,20],[118,4,55,2],[119,2,56,0],[119,3,56,1],[119,4,56,2],[121,2,58,0],[122,2,59,0,"api"],[122,5,59,3],[122,6,59,4,"interceptors"],[122,18,59,16],[122,19,59,17,"request"],[122,26,59,24],[122,27,59,25,"use"],[122,30,59,28],[123,4,59,28],[123,8,59,28,"_ref4"],[123,13,59,28],[123,20,59,28,"_asyncToGenerator"],[123,37,59,28],[123,38,59,28,"default"],[123,45,59,28],[123,47,60,2],[123,58,60,9,"config"],[123,64,60,15],[123,66,60,20],[124,6,61,4],[125,6,62,4],[125,10,62,8],[126,8,63,6],[126,12,63,12,"devToken"],[126,20,63,20],[126,29,63,29,"AsyncStorage"],[126,41,63,41],[126,42,63,41,"default"],[126,49,63,41],[126,50,63,42,"getItem"],[126,57,63,49],[126,58,63,50],[126,69,63,61],[126,70,63,62],[127,8,64,6],[127,12,64,10,"devToken"],[127,20,64,18],[127,22,64,20],[128,10,65,8,"config"],[128,16,65,14],[128,17,65,15,"headers"],[128,24,65,22],[128,25,65,23,"Authorization"],[128,38,65,36],[128,41,65,39],[128,51,65,49,"devToken"],[128,59,65,57],[128,61,65,59],[129,10,66,8,"console"],[129,17,66,15],[129,18,66,16,"log"],[129,21,66,19],[129,22,66,20],[129,59,66,57],[129,60,66,58],[130,10,67,8],[130,17,67,15,"config"],[130,23,67,21],[131,8,68,6],[132,6,69,4],[132,7,69,5],[132,8,69,6],[132,15,69,13,"error"],[132,20,69,18],[132,22,69,20],[133,8,70,6,"console"],[133,15,70,13],[133,16,70,14,"log"],[133,19,70,17],[133,20,70,18],[133,34,70,32],[133,35,70,33],[134,6,71,4],[136,6,73,4],[137,6,74,4],[137,10,74,10,"token"],[137,15,74,15],[137,24,74,24,"getStorageItem"],[137,38,74,38],[137,39,74,39],[137,51,74,51],[137,52,74,52],[138,6,75,4],[138,10,75,8,"token"],[138,15,75,13],[138,17,75,15],[139,8,76,6,"config"],[139,14,76,12],[139,15,76,13,"headers"],[139,22,76,20],[139,23,76,21,"Authorization"],[139,36,76,34],[139,39,76,37],[139,49,76,47,"token"],[139,54,76,52],[139,56,76,54],[140,6,77,4],[141,6,78,4],[141,13,78,11,"config"],[141,19,78,17],[142,4,79,2],[142,5,79,3],[143,4,79,3],[143,21,79,3,"_x3"],[143,24,79,3],[144,6,79,3],[144,13,79,3,"_ref4"],[144,18,79,3],[144,19,79,3,"apply"],[144,24,79,3],[144,31,79,3,"arguments"],[144,40,79,3],[145,4,79,3],[146,2,79,3],[146,7,80,3,"error"],[146,12,80,8],[146,16,80,13],[147,4,81,4],[147,11,81,11,"Promise"],[147,18,81,18],[147,19,81,19,"reject"],[147,25,81,25],[147,26,81,26,"error"],[147,31,81,31],[147,32,81,32],[148,2,82,2],[148,3,83,0],[148,4,83,1],[150,2,85,0],[151,2,86,0,"api"],[151,5,86,3],[151,6,86,4,"interceptors"],[151,18,86,16],[151,19,86,17,"response"],[151,27,86,25],[151,28,86,26,"use"],[151,31,86,29],[151,32,87,3,"response"],[151,40,87,11],[151,44,87,16,"response"],[151,52,87,24],[151,54,88,3,"error"],[151,59,88,8],[151,63,88,13],[152,4,89,4],[152,8,89,8,"error"],[152,13,89,13],[152,14,89,14,"response"],[152,22,89,22],[152,24,89,24,"status"],[152,30,89,30],[152,35,89,35],[152,38,89,38],[152,40,89,40],[153,6,90,6],[154,6,91,6,"deleteStorageItem"],[154,23,91,23],[154,24,91,24],[154,36,91,36],[154,37,91,37],[155,6,92,6,"deleteStorageItem"],[155,23,92,23],[155,24,92,24],[155,35,92,35],[155,36,92,36],[156,4,93,4],[157,4,94,4],[157,11,94,11,"Promise"],[157,18,94,18],[157,19,94,19,"reject"],[157,25,94,25],[157,26,94,26,"error"],[157,31,94,31],[157,32,94,32],[158,2,95,2],[158,3,96,0],[158,4,96,1],[159,2,99,0],[159,6,99,0,"_default"],[159,14,99,0],[159,17,99,15,"api"],[159,20,99,18],[160,0,99,19],[160,3]],"functionMap":{"names":["<global>","loadDevConfig","getStorageItem","deleteStorageItem","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1"],"mappings":"AAA;6BCW;CDY;uBEU;CFM;0BGE;CHM;EIY;GJmB;EKC;GLE;EMK,sBN;EOC;GPO"},"hasCjsExports":false},"type":"js/module"}]}