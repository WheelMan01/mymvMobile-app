{"dependencies":[{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":24,"index":51}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"fetchShowroomListings\", {\n    enumerable: true,\n    get: function () {\n      return fetchShowroomListings;\n    }\n  });\n  Object.defineProperty(exports, \"toggleLike\", {\n    enumerable: true,\n    get: function () {\n      return toggleLike;\n    }\n  });\n  Object.defineProperty(exports, \"toggleFavorite\", {\n    enumerable: true,\n    get: function () {\n      return toggleFavorite;\n    }\n  });\n  Object.defineProperty(exports, \"addComment\", {\n    enumerable: true,\n    get: function () {\n      return addComment;\n    }\n  });\n  Object.defineProperty(exports, \"fetchComments\", {\n    enumerable: true,\n    get: function () {\n      return fetchComments;\n    }\n  });\n  var _api = require(_dependencyMap[0], \"./api\");\n  var api = _interopDefault(_api);\n  const API_URL = 'https://photo-showroom.preview.emergentagent.com';\n  // Fetch all showroom listings (includes both user vehicles and marketplace listings)\n  const fetchShowroomListings = async () => {\n    try {\n      // Updated to use marketplace endpoint to include dealer vehicles\n      const response = await api.default.get(`/marketplace/showroom-listings`);\n\n      // Parse the response - handle both flat arrays and nested structures\n      let listings = response.data;\n\n      // If data is nested, extract the listings array\n      if (listings.listings) {\n        listings = listings.listings;\n      } else if (listings.data) {\n        listings = listings.data;\n      }\n\n      // Ensure listings is an array\n      if (!Array.isArray(listings)) {\n        console.warn('Unexpected showroom listings format:', listings);\n        return [];\n      }\n\n      // Normalize the listing structure\n      return listings.map(listing => {\n        // Handle marketplace listing structure\n        if (listing.type === 'marketplace' && listing.marketplace_listing) {\n          const mlListing = listing.marketplace_listing;\n          return {\n            id: listing.id || mlListing.id,\n            vehicle_id: mlListing.id,\n            user_id: mlListing.dealer_id,\n            title: mlListing.title,\n            description: mlListing.description,\n            photos: mlListing.photos || [],\n            likes: listing.likes || 0,\n            liked_by_current_user: listing.liked_by_current_user || false,\n            favorited_by_current_user: listing.favorited_by_current_user || false,\n            type: 'marketplace',\n            comments: listing.comments || []\n          };\n        }\n\n        // Handle user vehicle structure\n        if (listing.type === 'user' && listing.vehicle) {\n          const vehicle = listing.vehicle;\n          return {\n            id: listing.id,\n            vehicle_id: vehicle.id,\n            user_id: vehicle.user_id,\n            title: vehicle.title || `${vehicle.year} ${vehicle.make} ${vehicle.model}`,\n            description: vehicle.description,\n            photos: vehicle.photos || [],\n            likes: listing.likes || 0,\n            liked_by_current_user: listing.liked_by_current_user || false,\n            favorited_by_current_user: listing.favorited_by_current_user || false,\n            type: 'user',\n            comments: listing.comments || []\n          };\n        }\n\n        // Fallback for unexpected structure\n        return {\n          id: listing.id,\n          vehicle_id: listing.vehicle_id,\n          user_id: listing.user_id,\n          title: listing.title,\n          description: listing.description,\n          photos: listing.photos || [],\n          likes: listing.likes || 0,\n          liked_by_current_user: listing.liked_by_current_user || false,\n          favorited_by_current_user: listing.favorited_by_current_user || false,\n          type: listing.type || 'user',\n          comments: listing.comments || []\n        };\n      });\n    } catch (error) {\n      console.error('Error fetching showroom listings:', error);\n      if (error.response) {\n        console.error('Response data:', error.response.data);\n        console.error('Response status:', error.response.status);\n      }\n      throw error;\n    }\n  };\n\n  // Toggle like on a showroom listing\n  const toggleLike = async listingId => {\n    await api.default.post(`/showroom/${listingId}/like`);\n  };\n\n  // Toggle favorite on a showroom listing\n  const toggleFavorite = async listingId => {\n    await api.default.post(`/showroom/${listingId}/favorite`);\n  };\n\n  // Add a comment to a showroom listing\n  const addComment = async (listingId, text) => {\n    await api.default.post(`/showroom/${listingId}/comments`, {\n      text\n    });\n  };\n\n  // Fetch comments for a listing\n  const fetchComments = async listingId => {\n    const response = await api.default.get(`/showroom/${listingId}/comments`);\n    return response.data;\n  };\n});","lineCount":152,"map":[[12,2,21,0,"Object"],[12,8,21,0],[12,9,21,0,"defineProperty"],[12,23,21,0],[12,24,21,0,"exports"],[12,31,21,0],[13,4,21,0,"enumerable"],[13,14,21,0],[14,4,21,0,"get"],[14,7,21,0],[14,18,21,0,"get"],[14,19,21,0],[15,6,21,0],[15,13,21,0,"fetchShowroomListings"],[15,34,21,0],[16,4,21,0],[17,2,21,0],[18,2,106,0,"Object"],[18,8,106,0],[18,9,106,0,"defineProperty"],[18,23,106,0],[18,24,106,0,"exports"],[18,31,106,0],[19,4,106,0,"enumerable"],[19,14,106,0],[20,4,106,0,"get"],[20,7,106,0],[20,18,106,0,"get"],[20,19,106,0],[21,6,106,0],[21,13,106,0,"toggleLike"],[21,23,106,0],[22,4,106,0],[23,2,106,0],[24,2,111,0,"Object"],[24,8,111,0],[24,9,111,0,"defineProperty"],[24,23,111,0],[24,24,111,0,"exports"],[24,31,111,0],[25,4,111,0,"enumerable"],[25,14,111,0],[26,4,111,0,"get"],[26,7,111,0],[26,18,111,0,"get"],[26,19,111,0],[27,6,111,0],[27,13,111,0,"toggleFavorite"],[27,27,111,0],[28,4,111,0],[29,2,111,0],[30,2,116,0,"Object"],[30,8,116,0],[30,9,116,0,"defineProperty"],[30,23,116,0],[30,24,116,0,"exports"],[30,31,116,0],[31,4,116,0,"enumerable"],[31,14,116,0],[32,4,116,0,"get"],[32,7,116,0],[32,18,116,0,"get"],[32,19,116,0],[33,6,116,0],[33,13,116,0,"addComment"],[33,23,116,0],[34,4,116,0],[35,2,116,0],[36,2,121,0,"Object"],[36,8,121,0],[36,9,121,0,"defineProperty"],[36,23,121,0],[36,24,121,0,"exports"],[36,31,121,0],[37,4,121,0,"enumerable"],[37,14,121,0],[38,4,121,0,"get"],[38,7,121,0],[38,18,121,0,"get"],[38,19,121,0],[39,6,121,0],[39,13,121,0,"fetchComments"],[39,26,121,0],[40,4,121,0],[41,2,121,0],[42,2,2,0],[42,6,2,0,"_api"],[42,10,2,0],[42,13,2,0,"require"],[42,20,2,0],[42,21,2,0,"_dependencyMap"],[42,35,2,0],[43,2,2,0],[43,6,2,0,"api"],[43,9,2,0],[43,12,2,0,"_interopDefault"],[43,27,2,0],[43,28,2,0,"_api"],[43,32,2,0],[44,2,4,0],[44,8,4,6,"API_URL"],[44,15,4,13],[44,18,4,16],[44,71,4,69],[45,2,20,0],[46,2,21,7],[46,8,21,13,"fetchShowroomListings"],[46,29,21,34],[46,32,21,37],[46,38,21,37,"fetchShowroomListings"],[46,39,21,37],[46,44,21,77],[47,4,22,2],[47,8,22,6],[48,6,23,4],[49,6,24,4],[49,12,24,10,"response"],[49,20,24,18],[49,23,24,21],[49,29,24,27,"api"],[49,32,24,30],[49,33,24,30,"default"],[49,40,24,30],[49,41,24,31,"get"],[49,44,24,34],[49,45,24,35],[49,77,24,67],[49,78,24,68],[51,6,26,4],[52,6,27,4],[52,10,27,8,"listings"],[52,18,27,16],[52,21,27,19,"response"],[52,29,27,27],[52,30,27,28,"data"],[52,34,27,32],[54,6,29,4],[55,6,30,4],[55,10,30,8,"listings"],[55,18,30,16],[55,19,30,17,"listings"],[55,27,30,25],[55,29,30,27],[56,8,31,6,"listings"],[56,16,31,14],[56,19,31,17,"listings"],[56,27,31,25],[56,28,31,26,"listings"],[56,36,31,34],[57,6,32,4],[57,7,32,5],[57,13,32,11],[57,17,32,15,"listings"],[57,25,32,23],[57,26,32,24,"data"],[57,30,32,28],[57,32,32,30],[58,8,33,6,"listings"],[58,16,33,14],[58,19,33,17,"listings"],[58,27,33,25],[58,28,33,26,"data"],[58,32,33,30],[59,6,34,4],[61,6,36,4],[62,6,37,4],[62,10,37,8],[62,11,37,9,"Array"],[62,16,37,14],[62,17,37,15,"isArray"],[62,24,37,22],[62,25,37,23,"listings"],[62,33,37,31],[62,34,37,32],[62,36,37,34],[63,8,38,6,"console"],[63,15,38,13],[63,16,38,14,"warn"],[63,20,38,18],[63,21,38,19],[63,59,38,57],[63,61,38,59,"listings"],[63,69,38,67],[63,70,38,68],[64,8,39,6],[64,15,39,13],[64,17,39,15],[65,6,40,4],[67,6,42,4],[68,6,43,4],[68,13,43,11,"listings"],[68,21,43,19],[68,22,43,20,"map"],[68,25,43,23],[68,26,43,25,"listing"],[68,33,43,37],[68,37,43,42],[69,8,44,6],[70,8,45,6],[70,12,45,10,"listing"],[70,19,45,17],[70,20,45,18,"type"],[70,24,45,22],[70,29,45,27],[70,42,45,40],[70,46,45,44,"listing"],[70,53,45,51],[70,54,45,52,"marketplace_listing"],[70,73,45,71],[70,75,45,73],[71,10,46,8],[71,16,46,14,"mlListing"],[71,25,46,23],[71,28,46,26,"listing"],[71,35,46,33],[71,36,46,34,"marketplace_listing"],[71,55,46,53],[72,10,47,8],[72,17,47,15],[73,12,48,10,"id"],[73,14,48,12],[73,16,48,14,"listing"],[73,23,48,21],[73,24,48,22,"id"],[73,26,48,24],[73,30,48,28,"mlListing"],[73,39,48,37],[73,40,48,38,"id"],[73,42,48,40],[74,12,49,10,"vehicle_id"],[74,22,49,20],[74,24,49,22,"mlListing"],[74,33,49,31],[74,34,49,32,"id"],[74,36,49,34],[75,12,50,10,"user_id"],[75,19,50,17],[75,21,50,19,"mlListing"],[75,30,50,28],[75,31,50,29,"dealer_id"],[75,40,50,38],[76,12,51,10,"title"],[76,17,51,15],[76,19,51,17,"mlListing"],[76,28,51,26],[76,29,51,27,"title"],[76,34,51,32],[77,12,52,10,"description"],[77,23,52,21],[77,25,52,23,"mlListing"],[77,34,52,32],[77,35,52,33,"description"],[77,46,52,44],[78,12,53,10,"photos"],[78,18,53,16],[78,20,53,18,"mlListing"],[78,29,53,27],[78,30,53,28,"photos"],[78,36,53,34],[78,40,53,38],[78,42,53,40],[79,12,54,10,"likes"],[79,17,54,15],[79,19,54,17,"listing"],[79,26,54,24],[79,27,54,25,"likes"],[79,32,54,30],[79,36,54,34],[79,37,54,35],[80,12,55,10,"liked_by_current_user"],[80,33,55,31],[80,35,55,33,"listing"],[80,42,55,40],[80,43,55,41,"liked_by_current_user"],[80,64,55,62],[80,68,55,66],[80,73,55,71],[81,12,56,10,"favorited_by_current_user"],[81,37,56,35],[81,39,56,37,"listing"],[81,46,56,44],[81,47,56,45,"favorited_by_current_user"],[81,72,56,70],[81,76,56,74],[81,81,56,79],[82,12,57,10,"type"],[82,16,57,14],[82,18,57,16],[82,31,57,38],[83,12,58,10,"comments"],[83,20,58,18],[83,22,58,20,"listing"],[83,29,58,27],[83,30,58,28,"comments"],[83,38,58,36],[83,42,58,40],[84,10,59,8],[84,11,59,9],[85,8,60,6],[87,8,62,6],[88,8,63,6],[88,12,63,10,"listing"],[88,19,63,17],[88,20,63,18,"type"],[88,24,63,22],[88,29,63,27],[88,35,63,33],[88,39,63,37,"listing"],[88,46,63,44],[88,47,63,45,"vehicle"],[88,54,63,52],[88,56,63,54],[89,10,64,8],[89,16,64,14,"vehicle"],[89,23,64,21],[89,26,64,24,"listing"],[89,33,64,31],[89,34,64,32,"vehicle"],[89,41,64,39],[90,10,65,8],[90,17,65,15],[91,12,66,10,"id"],[91,14,66,12],[91,16,66,14,"listing"],[91,23,66,21],[91,24,66,22,"id"],[91,26,66,24],[92,12,67,10,"vehicle_id"],[92,22,67,20],[92,24,67,22,"vehicle"],[92,31,67,29],[92,32,67,30,"id"],[92,34,67,32],[93,12,68,10,"user_id"],[93,19,68,17],[93,21,68,19,"vehicle"],[93,28,68,26],[93,29,68,27,"user_id"],[93,36,68,34],[94,12,69,10,"title"],[94,17,69,15],[94,19,69,17,"vehicle"],[94,26,69,24],[94,27,69,25,"title"],[94,32,69,30],[94,36,69,34],[94,39,69,37,"vehicle"],[94,46,69,44],[94,47,69,45,"year"],[94,51,69,49],[94,55,69,53,"vehicle"],[94,62,69,60],[94,63,69,61,"make"],[94,67,69,65],[94,71,69,69,"vehicle"],[94,78,69,76],[94,79,69,77,"model"],[94,84,69,82],[94,86,69,84],[95,12,70,10,"description"],[95,23,70,21],[95,25,70,23,"vehicle"],[95,32,70,30],[95,33,70,31,"description"],[95,44,70,42],[96,12,71,10,"photos"],[96,18,71,16],[96,20,71,18,"vehicle"],[96,27,71,25],[96,28,71,26,"photos"],[96,34,71,32],[96,38,71,36],[96,40,71,38],[97,12,72,10,"likes"],[97,17,72,15],[97,19,72,17,"listing"],[97,26,72,24],[97,27,72,25,"likes"],[97,32,72,30],[97,36,72,34],[97,37,72,35],[98,12,73,10,"liked_by_current_user"],[98,33,73,31],[98,35,73,33,"listing"],[98,42,73,40],[98,43,73,41,"liked_by_current_user"],[98,64,73,62],[98,68,73,66],[98,73,73,71],[99,12,74,10,"favorited_by_current_user"],[99,37,74,35],[99,39,74,37,"listing"],[99,46,74,44],[99,47,74,45,"favorited_by_current_user"],[99,72,74,70],[99,76,74,74],[99,81,74,79],[100,12,75,10,"type"],[100,16,75,14],[100,18,75,16],[100,24,75,31],[101,12,76,10,"comments"],[101,20,76,18],[101,22,76,20,"listing"],[101,29,76,27],[101,30,76,28,"comments"],[101,38,76,36],[101,42,76,40],[102,10,77,8],[102,11,77,9],[103,8,78,6],[105,8,80,6],[106,8,81,6],[106,15,81,13],[107,10,82,8,"id"],[107,12,82,10],[107,14,82,12,"listing"],[107,21,82,19],[107,22,82,20,"id"],[107,24,82,22],[108,10,83,8,"vehicle_id"],[108,20,83,18],[108,22,83,20,"listing"],[108,29,83,27],[108,30,83,28,"vehicle_id"],[108,40,83,38],[109,10,84,8,"user_id"],[109,17,84,15],[109,19,84,17,"listing"],[109,26,84,24],[109,27,84,25,"user_id"],[109,34,84,32],[110,10,85,8,"title"],[110,15,85,13],[110,17,85,15,"listing"],[110,24,85,22],[110,25,85,23,"title"],[110,30,85,28],[111,10,86,8,"description"],[111,21,86,19],[111,23,86,21,"listing"],[111,30,86,28],[111,31,86,29,"description"],[111,42,86,40],[112,10,87,8,"photos"],[112,16,87,14],[112,18,87,16,"listing"],[112,25,87,23],[112,26,87,24,"photos"],[112,32,87,30],[112,36,87,34],[112,38,87,36],[113,10,88,8,"likes"],[113,15,88,13],[113,17,88,15,"listing"],[113,24,88,22],[113,25,88,23,"likes"],[113,30,88,28],[113,34,88,32],[113,35,88,33],[114,10,89,8,"liked_by_current_user"],[114,31,89,29],[114,33,89,31,"listing"],[114,40,89,38],[114,41,89,39,"liked_by_current_user"],[114,62,89,60],[114,66,89,64],[114,71,89,69],[115,10,90,8,"favorited_by_current_user"],[115,35,90,33],[115,37,90,35,"listing"],[115,44,90,42],[115,45,90,43,"favorited_by_current_user"],[115,70,90,68],[115,74,90,72],[115,79,90,77],[116,10,91,8,"type"],[116,14,91,12],[116,16,91,14,"listing"],[116,23,91,21],[116,24,91,22,"type"],[116,28,91,26],[116,32,91,30],[116,38,91,36],[117,10,92,8,"comments"],[117,18,92,16],[117,20,92,18,"listing"],[117,27,92,25],[117,28,92,26,"comments"],[117,36,92,34],[117,40,92,38],[118,8,93,6],[118,9,93,7],[119,6,94,4],[119,7,94,5],[119,8,94,6],[120,4,95,2],[120,5,95,3],[120,6,95,4],[120,13,95,11,"error"],[120,18,95,21],[120,20,95,23],[121,6,96,4,"console"],[121,13,96,11],[121,14,96,12,"error"],[121,19,96,17],[121,20,96,18],[121,55,96,53],[121,57,96,55,"error"],[121,62,96,60],[121,63,96,61],[122,6,97,4],[122,10,97,8,"error"],[122,15,97,13],[122,16,97,14,"response"],[122,24,97,22],[122,26,97,24],[123,8,98,6,"console"],[123,15,98,13],[123,16,98,14,"error"],[123,21,98,19],[123,22,98,20],[123,38,98,36],[123,40,98,38,"error"],[123,45,98,43],[123,46,98,44,"response"],[123,54,98,52],[123,55,98,53,"data"],[123,59,98,57],[123,60,98,58],[124,8,99,6,"console"],[124,15,99,13],[124,16,99,14,"error"],[124,21,99,19],[124,22,99,20],[124,40,99,38],[124,42,99,40,"error"],[124,47,99,45],[124,48,99,46,"response"],[124,56,99,54],[124,57,99,55,"status"],[124,63,99,61],[124,64,99,62],[125,6,100,4],[126,6,101,4],[126,12,101,10,"error"],[126,17,101,15],[127,4,102,2],[128,2,103,0],[128,3,103,1],[130,2,105,0],[131,2,106,7],[131,8,106,13,"toggleLike"],[131,18,106,23],[131,21,106,26],[131,27,106,33,"listingId"],[131,36,106,50],[131,40,106,70],[132,4,107,2],[132,10,107,8,"api"],[132,13,107,11],[132,14,107,11,"default"],[132,21,107,11],[132,22,107,12,"post"],[132,26,107,16],[132,27,107,17],[132,40,107,30,"listingId"],[132,49,107,39],[132,56,107,46],[132,57,107,47],[133,2,108,0],[133,3,108,1],[135,2,110,0],[136,2,111,7],[136,8,111,13,"toggleFavorite"],[136,22,111,27],[136,25,111,30],[136,31,111,37,"listingId"],[136,40,111,54],[136,44,111,74],[137,4,112,2],[137,10,112,8,"api"],[137,13,112,11],[137,14,112,11,"default"],[137,21,112,11],[137,22,112,12,"post"],[137,26,112,16],[137,27,112,17],[137,40,112,30,"listingId"],[137,49,112,39],[137,60,112,50],[137,61,112,51],[138,2,113,0],[138,3,113,1],[140,2,115,0],[141,2,116,7],[141,8,116,13,"addComment"],[141,18,116,23],[141,21,116,26],[141,27,116,26,"addComment"],[141,28,116,33,"listingId"],[141,37,116,50],[141,39,116,52,"text"],[141,43,116,64],[141,48,116,84],[142,4,117,2],[142,10,117,8,"api"],[142,13,117,11],[142,14,117,11,"default"],[142,21,117,11],[142,22,117,12,"post"],[142,26,117,16],[142,27,117,17],[142,40,117,30,"listingId"],[142,49,117,39],[142,60,117,50],[142,62,117,52],[143,6,117,54,"text"],[144,4,117,59],[144,5,117,60],[144,6,117,61],[145,2,118,0],[145,3,118,1],[147,2,120,0],[148,2,121,7],[148,8,121,13,"fetchComments"],[148,21,121,26],[148,24,121,29],[148,30,121,36,"listingId"],[148,39,121,53],[148,43,121,74],[149,4,122,2],[149,10,122,8,"response"],[149,18,122,16],[149,21,122,19],[149,27,122,25,"api"],[149,30,122,28],[149,31,122,28,"default"],[149,38,122,28],[149,39,122,29,"get"],[149,42,122,32],[149,43,122,33],[149,56,122,46,"listingId"],[149,65,122,55],[149,76,122,66],[149,77,122,67],[150,4,123,2],[150,11,123,9,"response"],[150,19,123,17],[150,20,123,18,"data"],[150,24,123,22],[151,2,124,0],[151,3,124,1],[152,0,124,2],[152,3]],"functionMap":{"names":["<global>","fetchShowroomListings","listings.map$argument_0","toggleLike","toggleFavorite","addComment","fetchComments"],"mappings":"AAA;qCCoB;wBCsB;KDmD;CDS;0BGG;CHE;8BIG;CJE;0BKG;CLE;6BMG;CNG"},"hasCjsExports":false},"type":"js/module"}]}